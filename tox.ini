[tox]
envlist = 
    py39
    py310
    py311
    py312
    py313
isolated_build = True

[testenv]
description = run tests with Python {env:PYTHON_VERSION}
deps = 
    pytest>=7.0
    pytest-cov
    numpy
    pandas
    scikit-learn<1.7.0
    scipy>=1.16.0
    xgboost<3.0.0
    fastwoe>=0.1.1.post4
    marimo>=0.14.12
commands = 
    python -m pytest tests/ -v --tb=short
    python -m pytest tests/compatibility/ -v --tb=short
    python scripts/test_compatibility.py



[testenv:py39]
description = run tests with Python 3.9
basepython = python3.9

[testenv:py310]
description = run tests with Python 3.10
basepython = python3.10

[testenv:py311]
description = run tests with Python 3.11
basepython = python3.11

[testenv:py312]
description = run tests with Python 3.12
basepython = python3.12

[testenv:py313]
description = run tests with Python 3.13
basepython = python3.13

[testenv:compatibility]
description = run compatibility tests only
deps = 
    pytest>=7.0
    numpy
    pandas
    scikit-learn<1.7.0
    scipy>=1.16.0
    xgboost<3.0.0
    fastwoe>=0.1.1.post4
    marimo>=0.14.12
commands = 
    python scripts/test_compatibility.py
    python -m pytest tests/compatibility/ -v --tb=short

[testenv:imports]
description = test import compatibility
deps = 
    numpy
    pandas
    scikit-learn<1.7.0
    scipy>=1.16.0
    xgboost<3.0.0
    fastwoe>=0.1.1.post4
    marimo>=0.14.12
commands = 
    python scripts/test_compatibility.py imports

[testenv:lint]
description = run linting checks
deps = 
    ruff>=0.12.4
    pylint
commands = 
    ruff check rfgboost/ tests/ scripts/
    pylint rfgboost/ tests/ scripts/

[testenv:docs]
description = build documentation
deps = 
    sphinx
    sphinx-rtd-theme
commands = 
    sphinx-build -b html docs/ docs/_build/html 